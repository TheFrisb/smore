{% extends 'core/base.html' %}
{% load util_tags %}
{% block content %}
    <section class="py-24 bg-gradient-to-b from-primary-800 to-primary-900 relative overflow-hidden min-h-screen">
        <div class="absolute inset-0 bg-squares-pattern opacity-5 pointer-events-none"></div>
        <div class="absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-emerald-500/50 to-transparent"></div>
        <div class="absolute inset-0">
            <div class="absolute inset-0 bg-gradient-radial from-emerald-500/5 via-transparent to-transparent opacity-30"></div>
            <div class="absolute right-0 top-1/4 w-96 h-96 bg-emerald-500/5 rounded-full filter blur-3xl"></div>
            <div class="absolute left-0 bottom-1/4 w-96 h-96 bg-emerald-500/5 rounded-full filter blur-3xl"></div>
        </div>
        <div class="container mx-auto px-4">
            <div class="text-center mb-16"><span
                    class="inline-flex items-center px-4 py-2 rounded-full bg-emerald-500/10 text-emerald-400 text-sm font-semibold mb-4 border border-emerald-500/20"><svg
                    xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-trophy w-4 h-4 mr-2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path
                    d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path
                    d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path
                    d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path
                    d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>Pricing</span>
                <h2 class="text-5xl font-bold text-white mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-emerald-100 to-white">
                    Choose Your Winning Strategy</h2>
                <p class="text-primary-200 max-w-2xl mx-auto">Customize your prediction package with our flexible
                    pricing options. Mix and match sports to create your perfect combination.</p>
                <div class="flex items-center justify-center gap-8 mt-8">
                    <div class="flex flex-col md:flex-row items-center gap-4 md:gap-8">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="lucide lucide-trophy w-5 h-5 text-emerald-400">
                                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                                    <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                                    <path d="M4 22h16"></path>
                                    <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                                    <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                                    <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                                </svg>
                            </div>
                            <span class="text-primary-200">90%+ Success Rate</span></div>
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="lucide lucide-zap w-5 h-5 text-emerald-400">
                                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                </svg>
                            </div>
                            <span class="text-primary-200">Daily Predictions</span></div>
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="lucide lucide-shield w-5 h-5 text-emerald-400">
                                    <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path>
                                </svg>
                            </div>
                            <span class="text-primary-200">Expert Analysis</span></div>
                    </div>
                </div>
            </div>
            <div class="max-w-5xl mx-auto grid lg:grid-cols-3 gap-8 mb-12 relative">
                <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 via-emerald-500/10 to-emerald-500/0 blur-3xl -z-10 opacity-20"></div>

                {% for product in products %}
                    <div class="relative group cursor-pointer rounded-2xl p-6 transition-all duration-300 bg-primary-800/50 border-2 border-primary-700/30 hover:border-emerald-500/30 hover:shadow-lg hover:shadow-emerald-500/10 product"
                         data-product-id="{{ product.id }}" data-product-price="{{ product.price }}"
                         data-discounted-product-price="{{ product.discounted_price }}"
                         data-product-name="{{ product.name }}">
                        <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/0 via-emerald-500/0 to-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-2xl"></div>
                        <div class="relative">
                            <div class="flex justify-between items-start mb-6">
                                <div>
                                    <div class="flex items-center space-x-2">
                                        {% svg_icon icon_name=product.name|lower|add:"Icon" css_classes="w-6 h-6 text-emerald-400" %}
                                        <h3 class="text-xl font-bold text-white">{{ product.name }}</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-emerald-400 mt-2 product__price">
                                        ${{ product.price }}</p>
                                    <p class="text-sm text-primary-300">per month</p>
                                    <p class="text-sm text-emerald-500/80 product__discountSection hidden">
                                        ${{ product.discount }} off with another
                                        sport</p>
                                </div>
                                <div class="w-6 h-6 rounded-full border-2 transition-colors border-primary-600 group-hover:border-emerald-500 product__checkboxContainer">
                                    {% svg_icon icon_name="checkboxIcon" css_classes="hidden w-5 h-5 text-white product__checkboxIcon" %}
                                </div>
                            </div>
                            <ul class="space-y-3">
                                <li class="flex items-center space-x-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round"
                                         class="lucide lucide-calendar w-5 h-5 text-emerald-500">
                                        <path d="M8 2v4"></path>
                                        <path d="M16 2v4"></path>
                                        <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                                        <path d="M3 10h18"></path>
                                    </svg>
                                    <span class="text-primary-200">{{ product.analysis_per_month }} analysis per month</span>
                                </li>
                                <li class="flex items-center space-x-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="lucide lucide-users w-5 h-5 text-emerald-500">
                                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                                        <circle cx="9" cy="7" r="4"></circle>
                                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                    </svg>
                                    <span class="text-primary-200">Earn rewards for referrals</span></li>
                                <li class="flex items-center space-x-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="lucide lucide-trophy w-5 h-5 text-emerald-500">
                                        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                                        <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                                        <path d="M4 22h16"></path>
                                        <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                                        <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                                        <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                                    </svg>
                                    <span class="text-primary-200">90%+ Success Rate</span></li>
                                <li class="flex items-center space-x-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="lucide lucide-zap w-5 h-5 text-emerald-500">
                                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                                    </svg>
                                    <span class="text-primary-200">Daily Predictions</span></li>
                                <li class="flex items-center space-x-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                         stroke-linejoin="round" class="lucide lucide-shield w-5 h-5 text-emerald-500">
                                        <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path>
                                    </svg>
                                    <span class="text-primary-200">Expert Analysis</span></li>
                            </ul>
                        </div>
                    </div>
                {% empty %}
                    <div class="text-center text-primary-200">No products available</div>
                {% endfor %}

            </div>
            <div class="max-w-5xl mx-auto mb-12">
                {% for addon in addons %}
                    <div class="relative group cursor-pointer rounded-2xl p-6 transition-all duration-300 bg-primary-800/50 border-2 border-primary-700/10 opacity-50 cursor-not-allowed addon"
                         data-addon-id="{{ addon.id }}"
                         data-addon-price="{{ addon.price }}">
                        <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/0 via-emerald-500/0 to-emerald-500/5 opacity-0 transition-opacity duration-500 rounded-2xl"></div>
                        <div class="relative">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-2">
                                        {% svg_icon icon_name=addon.name|cut:" "|lower|add:"Icon" css_classes="w-6 h-6 text-emerald-400" %}

                                        <h3 class="text-xl font-bold text-white">{{ addon.name }}</h3>
                                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-emerald-500/10 text-emerald-400">Add-on</span>
                                        <div class="relative inline-block">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                     viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                     stroke-width="2"
                                                     stroke-linecap="round" stroke-linejoin="round"
                                                     class="lucide lucide-info w-5 h-5 text-primary-300 hover:text-white transition-colors cursor-help">
                                                    <circle cx="12" cy="12" r="10"></circle>
                                                    <path d="M12 16v-4"></path>
                                                    <path d="M12 8h.01"></path>
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-primary-200 mb-4 addon_notAllowedText">Select at least one sport
                                        subscription to enable
                                        the {{ addon.name }} add-on.</p>
                                    <p class="text-primary-200 mb-4 addon_descriptionText hidden">{{ addon.description }}</p>
                                    <p class="text-2xl font-bold text-emerald-400/50">${{ addon.price }}</p>
                                </div>
                                <div class="w-6 h-6 rounded-full border-2 transition-colors border-primary-600/50"></div>
                                <div class="absolute inset-0 bg-primary-950/5 rounded-2xl"></div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="max-w-3xl mx-auto">
                <div class="bg-primary-800/50 backdrop-blur-sm rounded-2xl p-8 border-2 border-primary-700/30 shadow-lg shadow-emerald-500/5 checkoutSummarySection">
                    <div class="absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-transparent opacity-20 rounded-2xl"></div>
                    <div class="flex justify-between items-center mb-6"><h3 class="text-xl font-bold text-white">
                        Summary</h3>
                        <div class="text-right"><p class="text-sm text-primary-300 mb-1">Total Price</p>
                            <p class="text-3xl font-bold bg-gradient-to-r from-emerald-400 to-emerald-300 bg-clip-text text-transparent checkoutSummarySection__totalPrice">
                                $0.00</p></div>
                    </div>
                    <div class="space-y-4 mb-8 divide-y divide-primary-700/30 checkoutSummary__items"></div>
                    {% if request.user.is_authenticated %}
                        <button class="w-full group relative inline-flex items-center justify-center px-8 py-4 font-medium text-white bg-gradient-to-r from-emerald-600 to-emerald-500 rounded-lg overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-xl hover:shadow-emerald-600/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none"
                                id="checkoutButton"
                                disabled="">
                            <div class="absolute inset-0 bg-gradient-to-r from-emerald-400 to-emerald-300 opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                            <div class="relative flex items-center"><span class="text-lg">Get Started</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round"
                                     class="lucide lucide-chevron-right w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform duration-300">
                                    <path d="m9 18 6-6-6-6"></path>
                                </svg>
                            </div>
                        </button>
                    {% else %}
                        <a href="{% url 'accounts:register' %}"
                           class="w-full group relative inline-flex items-center justify-center px-8 py-4 font-medium text-white bg-gradient-to-r from-emerald-600 to-emerald-500 rounded-lg overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-xl hover:shadow-emerald-600/30 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:shadow-none"
                           disabled="">
                            <div class="absolute inset-0 bg-gradient-to-r from-emerald-400 to-emerald-300 opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                            <div class="relative flex items-center"><span class="text-lg">Get Started</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round"
                                     class="lucide lucide-chevron-right w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform duration-300">
                                    <path d="m9 18 6-6-6-6"></path>
                                </svg>
                            </div>
                        </a>
                    {% endif %}
                    <p class="text-primary-300 text-sm text-center mt-4 animate-pulse">Please select at least one sport
                        to continue</p></div>
                <div class="text-center mt-8">
                    <p class="text-primary-300 text-sm">Need help choosing?
                        <button class="text-emerald-400 hover:text-emerald-300 transition-colors">Contact our team
                        </button>
                    </p>
                </div>
            </div>
        </div>
    </section>{% endblock content %}
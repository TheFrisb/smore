{% load util_tags %}
<header class="fixed top-0 w-full bg-gradient-to-r from-primary-950/95 via-primary-900/95 to-primary-950/95 backdrop-blur-md shadow-dark-lg z-50">
    <div class="absolute bottom-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-secondary-500/50 to-transparent"></div>
    <div class="container mx-auto px-4">
        <div class="flex items-center h-20 justify-between">
            <a class="relative group flex-shrink-0" href="{% url 'core:home' %}">
                <div class="absolute -inset-2 bg-gradient-to-r from-secondary-500 to-secondary-500 rounded-full blur opacity-0 group-hover:opacity-20 transition duration-1000 group-hover:duration-200"></div>
                <img src="https://i.ibb.co/LRzvJgr/smore-logo.png" alt="Smore.bet" class="h-12 relative">
            </a>
            <nav class="hidden md:flex justify-center flex-1 space-x-12">
                <a class="relative group {% if request|is_link_active:'core:home' %}text-white{% else %}text-primary-300{% endif %}"
                   href="{% url 'core:home' %}"><span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                    Home</a>
                <a class="relative group {% if request|is_link_active:'core:history' %}text-white{% else %}text-primary-300{% endif %}"
                   href="{% url 'core:history' %}">
                    <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                    History</a>
                <a class="relative group {% if request|is_link_active:'core:plans' %}text-white{% else %}text-primary-300{% endif %}"
                   href="{% url 'core:plans' %}"><span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                    Plans</a>
                <a class="relative group {% if request|is_link_active:'core:faq' %}text-white{% else %}text-primary-300{% endif %}"
                   href="{% url 'core:faq' %}"><span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                    FAQ</a>
                <a class="relative group {% if request|is_link_active:'core:how_to_join' %}text-white{% else %}text-primary-300{% endif %}"
                   href="{% url 'core:how_to_join' %}"><span
                        class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                    How to Join</a>
            </nav>
            <div class="flex items-center space-x-4 md:space-x-6">
                {% if request.user.is_authenticated %}
                    <a class="flex items-center space-x-2 text-primary-300 hover:text-white transition-colors"
                       href="{% url 'accounts:my_account' %}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                             class="lucide lucide-user w-5 h-5">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>{{ request.user.username }}</span>
                    </a>
                {% else %}
                    <a class="hidden md:inline-flex text-primary-300 hover:text-white transition-colors relative group"
                       href="{% url 'accounts:login' %}">
                        <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary-500 group-hover:w-full transition-all duration-300"></span>
                        Sign In</a>
                    <a class="relative hidden md:inline-flex items-center justify-center px-6 py-2.5 font-medium text-white bg-gradient-to-r from-secondary-600 to-secondary-500 rounded-lg shadow-lg shadow-secondary-600/20 hover:shadow-secondary-600/40 transform hover:-translate-y-0.5 transition-all duration-200 focus:ring-2 focus:ring-secondary-500/50 focus:ring-offset-2 focus:ring-offset-primary-950"
                       href="{% url 'accounts:register' %}">Sign Up</a>
                {% endif %}
                <button class="md:hidden p-2 text-primary-300 hover:text-white transition-colors" id="mobileMenuButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="hamburgerIcon w-6 h-6">
                        <line x1="4" x2="20" y1="12" y2="12"></line>
                        <line x1="4" x2="20" y1="6" y2="6"></line>
                        <line x1="4" x2="20" y1="18" y2="18"></line>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="closeIcon hidden w-6 h-6">
                        <path d="M18 6 6 18"></path>
                        <path d="m6 6 12 12"></path>
                    </svg>
                </button>
            </div>
        </div>
        <div class="md:hidden transition-all duration-300 ease-in-out max-h-0 opacity-0 overflow-hidden"
             id="mobileMenuDropdownContainer">
            <nav class="py-4 space-y-2 border-t border-primary-700/30">
                <a class="block px-4 py-2 rounded-lg transition-colors {% if request|is_link_active:'core:home' %}bg-primary-500/10 text-secondary-400{% else %}text-primary-300 hover:bg-primary-800/50 hover:text-white{% endif %}"
                   href="{% url 'core:home' %}">Home</a>

                <a class="block px-4 py-2 rounded-lg transition-colors {% if request|is_link_active:'core:history' %}bg-primary-500/10 text-secondary-400{% else %}text-primary-300 hover:bg-primary-800/50 hover:text-white{% endif %}"
                   href="{% url 'core:history' %}">History</a>

                <a class="block px-4 py-2 rounded-lg transition-colors {% if request|is_link_active:'core:plans' %}bg-primary-500/10 text-secondary-400{% else %}text-primary-300 hover:bg-primary-800/50 hover:text-white{% endif %}"
                   href="{% url 'core:plans' %}">Plans</a>

                <a class="block px-4 py-2 rounded-lg transition-colors {% if request|is_link_active:'core:faq' %}bg-primary-500/10 text-secondary-400{% else %}text-primary-300 hover:bg-primary-800/50 hover:text-white{% endif %}"
                   href="{% url 'core:faq' %}">FAQ</a>

                <a class="block px-4 py-2 rounded-lg transition-colors {% if request|is_link_active:'core:how_to_join' %}bg-primary-500/10 text-secondary-400{% else %}text-primary-300 hover:bg-primary-800/50 hover:text-white{% endif %}"
                   href="{% url 'core:how_to_join' %}">How to Join</a>


                <div class="pt-4 space-y-2 border-t border-primary-700/30 mt-4">
                    {% if request.user.is_authenticated %}
                        <a class="block px-4 py-2 rounded-lg transition-colors text-primary-300 hover:bg-primary-800/50 hover:text-white"
                           href="{% url 'accounts:my_account' %}">My Account</a>

                        <form action="{% url 'accounts:logout' %}" method="post">
                            {% csrf_token %}
                            <button type="submit"
                                    class="block px-4 py-2 rounded-lg transition-colors text-red-400 hover:bg-primary-800/50 hover:text-white">
                                Sign Out
                            </button>
                        </form>
                    {% else %}
                        <a class="block px-4 py-2 text-primary-300 hover:text-white transition-colors"
                           href="{% url 'accounts:login' %}">Sign In</a>

                        <a class="block px-4 py-2 text-white bg-gradient-to-r from-secondary-600 to-primary-500 rounded-lg"
                           href="{% url 'accounts:register' %}">Sign Up</a>
                    {% endif %}
                </div>

            </nav>
        </div>
    </div>
</header>

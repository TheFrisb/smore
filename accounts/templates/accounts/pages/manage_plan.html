{% extends 'accounts/base.html' %}
{% load util_tags i18n plan_tags %}
{% block dashboard %}

    <div class="space-y-8">
        <div class="bg-primary-800/50 backdrop-blur-sm rounded-2xl p-8 border border-primary-700/30">
            <div class="flex justify-between items-start mb-8">
                <div><h2 class="text-2xl font-bold text-white">{% trans "Current Plan" %}</h2>
                    <p class="text-primary-300 mt-1">{% trans "Your active subscriptions and add-ons" %}</p></div>
            </div>
            <div class="grid gap-6 mb-8">
                {% if user_subscriptions %}
                    {% for subscription in user_subscriptions %}
                        <div class="bg-primary-900/50 rounded-xl p-6 border border-primary-700/50">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <div class="bg-secondary-500/10 p-3 rounded-lg">
                                        {% svg_icon icon_name=subscription.product_price.product.name|cut:" "|lower|add:"Icon" css_classes="w-6 h-6 text-secondary-400" %}
                                    </div>
                                    <div>
                                        <h3 class="text-xl font-bold text-white">
                                            {% blocktranslate with name=subscription.product_price.product.get_name_display %}
                                                {{ name }}{% endblocktranslate %}
                                        </h3>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-xl font-bold text-secondary-400">
                                        {{ subscription.product_price.currency }}{{ subscription.product_price.amount }}
                                    </div>
                                    <div class="text-sm text-primary-300">{{ subscription.product_price|price_interval }}</div>
                                </div>
                            </div>
                            <div class="border-t border-primary-700/30 pt-6 mt-6"></div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3 text-primary-300">
                                    {% svg_icon icon_name='calendarIcon' css_classes='w-5 h-5' %}
                                    <span>{% trans 'Next billing date' %}: {{ subscription.end_date|date:"l, j F, Y" }}</span>
                                </div>


                            </div>
                        </div>


                    {% endfor %}
                {% else %}
                    <p class="text-primary-200">{% trans "You don't have active subscriptions" %}.</p>
                {% endif %}
            </div>

        </div>
        <div class="bg-primary-800/50 backdrop-blur-sm rounded-2xl p-8 border border-primary-700/30">
            <h2 class="text-2xl font-bold text-white mb-4">{% trans "Update Subscription" %}</h2>
            <p
                    class="text-primary-300 mb-6">{% trans "Want to add more sports or features to your plan? Visit our plans page to explore all available options" %}.</p>
            <a
                    class="inline-flex items-center px-6 py-3 bg-secondary-600 text-white rounded-lg hover:bg-secondary-500 transition-colors"
                    href="{{ view_plans_url }}">{% trans "View Available Plans" %}
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-arrow-right ml-2 w-5 h-5">
                    <path d="M5 12h14"></path>
                    <path d="m12 5 7 7-7 7"></path>
                </svg>
            </a></div>
        {% if user_subscriptions %}
            <div class="bg-primary-800/50 backdrop-blur-sm rounded-2xl p-8 border border-primary-700/30"><h2
                    class="text-2xl font-bold text-white mb-6">{% trans "Manage Subscription" %}</h2>
                <p class="text-primary-300 mb-6">{% trans "Update your billing method or cancel your subscription" %}.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="{% url 'payments:manage_subscription' %}"
                       class="inline-flex items-center px-6 py-3 bg-secondary-600 text-white rounded-lg hover:bg-secondary-500 transition-colors">
                        {% trans "Manage Subscription" %}
                    </a>
                </div>
            </div>
        {% endif %}
    </div>

{% endblock dashboard %}
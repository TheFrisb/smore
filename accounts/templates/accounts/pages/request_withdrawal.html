{% extends 'accounts/base.html' %}
{% block dashboard %}

    <div class="space-y-8">
        <div class="bg-primary-800/50 backdrop-blur-sm rounded-2xl p-8 border border-primary-700/30">
            <div class="flex items-center justify-between mb-8"><h2 class="text-2xl font-bold text-white">Available
                Balance</h2>
                <div class="text-right"><p class="text-3xl font-bold text-secondary-400">
                    ${{ request.user.balance.balance }}</p>
                    <p class="text-primary-300 text-sm">Available for withdrawal</p></div>
            </div>
            {% if form.errors %}
                <div class="bg-red-500/10 backdrop-blur-sm rounded-2xl p-6 border border-red-500/20 mb-12">
                    <div class="flex items-center space-x-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                             fill="none"
                             stroke="currentColor" stroke-width="2" stroke-linecap="round"
                             stroke-linejoin="round"
                             class="lucide lucide-alert-triangle w-6 h-6 text-red-400 flex-shrink-0 mt-1">
                            <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                            <path d="M12 9v4"></path>
                            <path d="M12 17h.01"></path>
                        </svg>
                        <div>
                            {% for field, errors in form.errors.items %}
                                {% for error in errors %}
                                    <p class="text-primary-200">    {{ error }}</p>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endif %}
            <form class="space-y-6" method="post" action="{% url 'accounts:request_withdrawal' %}">
                {% csrf_token %}
                <div>
                    <label for="amount" class="block text-sm font-medium text-primary-300 mb-2">Withdrawal
                        Amount</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                 stroke-linejoin="round" class="lucide lucide-wallet h-5 w-5 text-primary-500">
                                <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
                                <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
                                <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
                            </svg>
                        </div>
                        <input required type="number" id="amount" name="amount" max="{{ request.user.balance.balance }}"
                               step="0.01"
                               class="appearance-none relative block w-full px-3 py-3 pl-10 border border-primary-700/50 rounded-lg bg-primary-900/50 placeholder-primary-500 text-white focus:outline-none focus:ring-2 focus:ring-secondary-500/50 focus:border-secondary-500/50 transition-all duration-200"
                               placeholder="Enter amount" value="">
                    </div>
                </div>
                <div>
                    <label for="payment-method" class="block text-sm font-medium text-primary-300 mb-2">Payment
                        Method</label>
                    <div class="relative">

                        <div class="space-y-3">
                            <div class="relative flex items-center">
                                <div class="flex-1 bg-primary-900/50 px-4 py-3 rounded-lg border border-primary-700/50 text-primary-400 flex items-center justify-between">
                                    <span>Bank Transfer</span><span
                                        class="text-xs bg-secondary-500/10 text-secondary-400 px-2 py-1 rounded-full">Coming Soon</span>
                                </div>
                            </div>
                            <div class="relative flex items-center">
                                <div class="flex-1 bg-primary-900/50 px-4 py-3 rounded-lg border border-primary-700/50 text-primary-400 flex items-center justify-between">
                                    <span>PayPal</span><span
                                        class="text-xs bg-secondary-500/10 text-secondary-400 px-2 py-1 rounded-full">Coming Soon</span>
                                </div>
                            </div>
                            <div class="relative flex items-center">
                                <label class="flex-1 cursor-pointer">
                                    <input type="radio" name="payment-method" class="hidden" value="crypto" checked="">
                                    <div class="bg-primary-900/50 px-4 py-3 rounded-lg border border-secondary-500/30 text-white flex items-center justify-between hover:border-secondary-500/50 transition-colors">
                                        <span>Cryptocurrency</span><span
                                            class="text-xs bg-secondary-500/10 text-secondary-400 px-2 py-1 rounded-full">Available</span>
                                    </div>
                                </label></div>
                        </div>
                    </div>
                </div>
                <div>
                    <label for="payout_destination" class="block text-sm font-medium text-primary-300 mb-2">Bitcoin
                        Address</label>
                    <div class="relative">
                        <input type="text" name="payout_destination" id="payout_destination"
                               class="appearance-none relative block w-full px-3 py-3 border border-primary-700/50 rounded-lg bg-primary-900/50 placeholder-primary-500 text-white focus:outline-none focus:ring-2 focus:ring-secondary-500/50 focus:border-secondary-500/50 transition-all duration-200"
                               placeholder="Enter your Bitcoin address" required="">
                    </div>
                    <p class="mt-2 text-sm text-primary-300">Double-check your Bitcoin address before submitting</p>
                </div>
                <div class="bg-primary-900/50 rounded-lg p-4 flex items-start space-x-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="lucide lucide-alert-circle w-5 h-5 text-primary-300 flex-shrink-0 mt-0.5">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" x2="12" y1="8" y2="12"></line>
                        <line x1="12" x2="12.01" y1="16" y2="16"></line>
                    </svg>
                    <p class="text-sm text-primary-300">Cryptocurrency withdrawals are processed within 24 hours. Bank
                        Transfer and PayPal options will be available soon.</p>
                </div>
                <button type="submit"
                        class="w-full py-3 bg-secondary-600 text-white rounded-lg hover:bg-secondary-500 transition-colors focus:outline-none focus:ring-2 focus:ring-secondary-500/50 focus:ring-offset-2 focus:ring-offset-primary-800">
                    Request Withdrawal
                </button>
            </form>
        </div>
    </div>
{% endblock dashboard %}